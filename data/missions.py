"""
Описание миссий для AI Teacher Quest.
"""
from __future__ import annotations

from dataclasses import dataclass, field
from typing import Dict, List


@dataclass
class Mission:
    id: str
    title: str
    summary: str
    scenario: str
    difficulty: int
    success_threshold: int
    requires_ethics: bool
    context_keywords: List[str] = field(default_factory=list)
    response_templates: List[str] = field(default_factory=list)
    tips: List[str] = field(default_factory=list)


MISSIONS: List[Mission] = [
    Mission(
        id="test_design",
        title="Экспресс-тест по русскому языку",
        summary="Учителю русского языка нужен мини-тест по теме урока.",
        scenario="Вы — преподаватель русского языка. Нужно за несколько минут подготовить тест по теме «Правописание безударных гласных в корне» для 6 класса.",
        difficulty=1,
        success_threshold=8,
        requires_ethics=False,
        context_keywords=["русский", "орфограф", "6 класс", "правопис"],
        response_templates=[
            "Попросите ИИ составить 5 вопросов: три с выбором ответа и два на вставку пропущенных букв.",
            "Добавьте задание, где ученики должны объяснить правило или привести пример.",
            "В конце попросите перечислить правильные ответы и краткую шкалу оценивания.",
        ],
        tips=[
            "Укажите тему, класс и желаемый формат вопросов.",
            "Определите количество заданий и необходимость ключей ответов.",
        ],
    ),
    Mission(
        id="simplify_ml",
        title="Проверить и оценить работы",
        summary="Нужно выстроить инструкцию ИИ для проверки работ и выставления баллов.",
        scenario="Вы проверяете письменные работы студентов. Требуется промпт, который поможет ИИ анализировать тексты по критериям (логика, аргументация, грамотность) и предлагать балл с комментариями.",
        difficulty=2,
        success_threshold=9,
        requires_ethics=True,
        context_keywords=["критерий", "оцен", "эссе", "рубрика"],
        response_templates=[
            "Опишите структуру проверки: сначала соответствие теме, затем аргументация и стиль.",
            "Попросите ИИ сформировать таблицу с баллами по каждому критерию и общий итог.",
            "Добавьте требование упоминать академическую честность и указывать сомнительные места.",
        ],
        tips=[
            "Перечислите критерии и шкалу оценивания.",
            "Уточните, какой формат ответа хотите (таблица, список рекомендаций).",
        ],
    ),
    Mission(
        id="detect_hallucinations",
        title="Практические работы на учебный год",
        summary="Нужно спланировать серию практических заданий на весь год.",
        scenario="Вы — методист. Требуется составить список практических работ по информатике на весь учебный год: по одной работе на четверть, с целями, оборудованием и критериями защиты.",
        difficulty=3,
        success_threshold=10,
        requires_ethics=False,
        context_keywords=["практическ", "четверть", "план", "календар"],
        response_templates=[
            "Попросите ИИ распределить темы практических работ по четвертям (осень, зима, весна, итог).",
            "Добавьте требование перечислить материалы/ПО и ожидаемые навыки.",
            "Попросите кратко описать формат защиты работы и чек-лист для оценивания.",
        ],
        tips=[
            "Укажите дисциплину, количество работ и необходимость привязки к четвертям.",
            "Попросите добавить критерии оценки и ресурсы.",
        ],
    ),
    Mission(
        id="creative_tasks",
        title="Задания против списывания",
        summary="Придумать задания, которые трудно списать через ИИ.",
        scenario="Вы планируете домашнюю работу и хотите задания, которые сложнее решить, просто задав вопрос ИИ. Нужно сформулировать требования к таким заданиям.",
        difficulty=2,
        success_threshold=9,
        requires_ethics=True,
        context_keywords=["проект", "практик", "личный опыт", "рефлекс"],
        response_templates=[
            "Попросите предложить задания, требующие личного опыта или наблюдений студентов.",
            "Сформулируйте критерии оригинальности и способы проверки результата.",
            "Добавьте напоминание о важности самостоятельной работы.",
        ],
        tips=[
            "Уточните дисциплину или тему, чтобы ИИ дал релевантные примеры.",
            "Добавьте ограничения по формату ответа (например, список идей).",
        ],
    ),
]

MISSIONS_BY_ID: Dict[str, Mission] = {mission.id: mission for mission in MISSIONS}


def get_mission(mission_id: str) -> Mission:
    return MISSIONS_BY_ID[mission_id]

